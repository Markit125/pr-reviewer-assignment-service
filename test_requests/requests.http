1. Check the health of the service

GET http://localhost:8080/health

2. Add the "backend" team (with 3 members)

POST http://localhost:8080/team/add
Content-Type: application/json

{
"team_name": "backend",
"members": [
{
"user_id": "u1",
"username": "Alice",
"is_active": true
},
{
"user_id": "u2",
"username": "Bob",
"is_active": true
},
{
"user_id": "u3",
"username": "Charlie",
"is_active": false
}
]
}

3. Get the "backend" team

GET http://localhost:8080/team/get?team_name=backend

4. Create a PR (from Alice, "u1")

This should automatically assign "u2" (Bob),

since Charlie ("u3") is inactive.

POST http://localhost:8080/pullRequest/create
Content-Type: application/json

{
"pull_request_id": "pr-101",
"pull_request_name": "Initial feature",
"author_id": "u1"
}

5. Get review assignments for "u2" (Bob)

This should show "pr-101"

GET http://localhost:8080/users/getReview?user_id=u2

6. Set "u3" (Charlie) to be active

POST http://localhost:8080/users/setIsActive
Content-Type: application/json

{
"user_id": "u3",
"is_active": true
}

7. Reassign the reviewer on "pr-101"

This will replace "u2" (Bob).

The only other candidate now is "u3" (Charlie), so it should pick him.

POST http://localhost:8080/pullRequest/reassign
Content-Type: application/json

{
"pull_request_id": "pr-101",
"old_user_id": "u2"
}

8. Merge the PR

POST http://localhost:8080/pullRequest/merge
Content-Type: application/json

{
"pull_request_id": "pr-101"
}

9. (FAIL TEST) Try to reassign after merge

This should correctly fail with a 409 Conflict

POST http://localhost:8080/pullRequest/reassign
Content-Type: application/json

{
"pull_request_id": "pr-101",
"old_user_id": "u3"
}